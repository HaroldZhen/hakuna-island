(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16a8ecc4"],{a434:function(t,e,i){"use strict";var c=i("23e7"),l=i("23cb"),a=i("a691"),n=i("50c4"),o=i("7b0b"),r=i("65f0"),s=i("8418"),b=i("1dde"),d=b("splice"),u=Math.max,p=Math.min,m=9007199254740991,O="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var i,c,b,d,f,j,h=o(this),g=n(h.length),v=l(t,g),A=arguments.length;if(0===A?i=c=0:1===A?(i=0,c=g-v):(i=A-2,c=p(u(a(e),0),g-v)),g+i-c>m)throw TypeError(O);for(b=r(h,c),d=0;d<c;d++)f=v+d,f in h&&s(b,d,h[f]);if(b.length=c,i<c){for(d=v;d<g-c;d++)f=d+c,j=d+i,f in h?h[j]=h[f]:delete h[j];for(d=g;d>g-c+i;d--)delete h[d-1]}else if(i>c)for(d=g-c;d>v;d--)f=d+c-1,j=d+i-1,f in h?h[j]=h[f]:delete h[j];for(d=0;d<i;d++)h[d+v]=arguments[d+2];return h.length=g-c+i,b}})},e01a:function(t,e,i){"use strict";var c=i("23e7"),l=i("83ab"),a=i("da84"),n=i("5135"),o=i("861d"),r=i("9bf2").f,s=i("e893"),b=a.Symbol;if(l&&"function"==typeof b&&(!("description"in b.prototype)||void 0!==b().description)){var d={},u=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof u?new b(t):void 0===t?b():b(t);return""===t&&(d[e]=!0),e};s(u,b);var p=u.prototype=b.prototype;p.constructor=u;var m=p.toString,O="Symbol(test)"==String(b("test")),f=/^Symbol\((.*)\)[^)]+$/;r(p,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=m.call(t);if(n(d,t))return"";var i=O?e.slice(7,-1):e.replace(f,"$1");return""===i?void 0:i}}),c({global:!0,forced:!0},{Symbol:u})}},f957:function(t,e,i){"use strict";i.r(e);i("a4d3"),i("e01a");var c=i("7a23"),l={class:"d-flex justify-content-between align-items-baseline"},a=Object(c["i"])("h2",null,[Object(c["i"])("i",{class:"bi bi-bank2 p-1",style:{"font-size":"1.5rem"}}),Object(c["h"])("最新消息")],-1),n={class:"table mt-4"},o=Object(c["i"])("thead",null,[Object(c["i"])("tr",null,[Object(c["i"])("th",{style:{width:"200px"}},"標題"),Object(c["i"])("th",{style:{width:"200px"}},"作者"),Object(c["i"])("th",null,"描述"),Object(c["i"])("th",{style:{width:"100px"}},"建立時間"),Object(c["i"])("th",{style:{width:"100px"}},"是否公開"),Object(c["i"])("th",{style:{width:"120px"}},"編輯")])],-1),r={key:0,class:"text-success"},s={key:1,class:"text-muted"},b={class:"btn-group"};function d(t,e,i,d,u,p){var m=Object(c["G"])("Pagination"),O=Object(c["G"])("ArticleModal"),f=Object(c["G"])("DeleteModal");return Object(c["x"])(),Object(c["e"])(c["a"],null,[Object(c["i"])("div",l,[a,Object(c["i"])("button",{class:"btn btn-primary m-3",onClick:e[1]||(e[1]=function(){return p.openModal&&p.openModal.apply(p,arguments)})},"建立新的最新消息")]),Object(c["i"])("table",n,[o,Object(c["i"])("tbody",null,[(Object(c["x"])(!0),Object(c["e"])(c["a"],null,Object(c["E"])(u.articles,(function(e){return Object(c["x"])(),Object(c["e"])("tr",{key:e.id},[Object(c["i"])("td",null,Object(c["J"])(e.title),1),Object(c["i"])("td",null,Object(c["J"])(e.author),1),Object(c["i"])("td",null,Object(c["J"])(e.description),1),Object(c["i"])("td",null,Object(c["J"])(t.$filters.date(e.create_at)),1),Object(c["i"])("td",null,[e.isPublic?(Object(c["x"])(),Object(c["e"])("span",r,"已上架")):(Object(c["x"])(),Object(c["e"])("span",s,"未上架"))]),Object(c["i"])("td",null,[Object(c["i"])("div",b,[Object(c["i"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(t){return p.getArticle(e.id)}}," 編輯 ",8,["onClick"]),Object(c["i"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(t){return p.openDeleteModal(e)}}," 刪除 ",8,["onClick"])])])])})),128))])]),u.pages.total_pages?(Object(c["x"])(),Object(c["e"])(m,{key:0,pages:u.pages,"current-page":u.currentPage,onToPage:p.toPage},null,8,["pages","current-page","onToPage"])):Object(c["f"])("",!0),Object(c["i"])(O,{isNew:u.isNew,article:u.tempArticle,ref:"articleModal",onNewOrUpdateArticle:p.newOrUpdateArticle},null,8,["isNew","article","onNewOrUpdateArticle"]),Object(c["i"])(f,{item:u.tempArticle,onDeletItem:p.deleteArticle,ref:"deleteModal"},null,8,["item","onDeletItem"])],64)}var u=i("5530"),p=i("9de5"),m=(i("a434"),{class:"modal fade",id:"articleModal",tabindex:"-1","aria-labelledby":"articleModalLabel","aria-hidden":"true",ref:"modal"}),O={class:"modal-dialog modal-lg"},f={class:"modal-content"},j={class:"modal-header"},h={class:"modal-title",id:"articleModalLabel"},g={key:0},v={key:1},A=Object(c["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),w={class:"modal-body"},y={class:"row"},x={class:"col-sm-4"},M={class:"mb-3"},k=Object(c["i"])("label",{for:"title",class:"form-label"},"標題",-1),U={class:"mb-3"},P=Object(c["i"])("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),C={class:"mb-3"},D=Object(c["i"])("label",{for:"author",class:"form-label"},"作者",-1),T={class:"mb-3"},$=Object(c["i"])("label",{for:"create_at"},"文章建立日期",-1),N={class:"col-sm-8"},S=Object(c["i"])("label",{for:"tag",class:"form-label"},"標籤",-1),V={class:"row gx-1 mb-3"},B={class:"input-group input-group-sm"},J=Object(c["i"])("i",{class:"bi bi-x"},null,-1),_={key:0,class:"col-md-2 mb-1"},E={class:"mb-3"},G=Object(c["i"])("label",{for:"description",class:"form-label"},"文章描述",-1),I={class:"mb-3"},L=Object(c["i"])("label",{for:"content",class:"form-label"},"文章說明",-1),z={class:"mb-3"},q={class:"form-check"},F=Object(c["i"])("label",{class:"form-check-label",for:"isPublic"}," 是否公開 ",-1),H={class:"modal-footer"},K=Object(c["i"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function Q(t,e,i,l,a,n){return Object(c["x"])(),Object(c["e"])("div",m,[Object(c["i"])("div",O,[Object(c["i"])("div",f,[Object(c["i"])("div",j,[Object(c["i"])("h5",h,[i.isNew?(Object(c["x"])(),Object(c["e"])("span",g,"新增文章")):(Object(c["x"])(),Object(c["e"])("span",v,"編輯優惠卷"))]),A]),Object(c["i"])("div",w,[Object(c["i"])("div",y,[Object(c["i"])("div",x,[Object(c["i"])("div",M,[k,Object(c["T"])(Object(c["i"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.tempArticle.title=t}),placeholder:"請輸入標題"},null,512),[[c["O"],a.tempArticle.title]])]),Object(c["i"])("div",U,[P,Object(c["T"])(Object(c["i"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":e[2]||(e[2]=function(t){return a.tempArticle.imageUrl=t}),placeholder:"請輸入圖片連結"},null,512),[[c["O"],a.tempArticle.imageUrl]])]),Object(c["i"])("div",C,[D,Object(c["T"])(Object(c["i"])("input",{type:"text",class:"form-control",id:"author","onUpdate:modelValue":e[3]||(e[3]=function(t){return a.tempArticle.author=t}),placeholder:"請輸入標題"},null,512),[[c["O"],a.tempArticle.author]])]),Object(c["i"])("div",T,[$,Object(c["T"])(Object(c["i"])("input",{type:"date",class:"form-control",id:"create_at","onUpdate:modelValue":e[4]||(e[4]=function(t){return a.createDate=t})},null,512),[[c["O"],a.createDate]])])]),Object(c["i"])("div",N,[S,Object(c["i"])("div",V,[(Object(c["x"])(!0),Object(c["e"])(c["a"],null,Object(c["E"])(a.tempArticle.tag,(function(t,e){return Object(c["x"])(),Object(c["e"])("div",{class:"col-md-2 mb-1",key:e},[Object(c["i"])("div",B,[Object(c["T"])(Object(c["i"])("input",{type:"text",class:"form-control form-control",id:"tag","onUpdate:modelValue":function(t){return a.tempArticle.tag[e]=t},placeholder:"請輸入標籤"},null,8,["onUpdate:modelValue"]),[[c["O"],a.tempArticle.tag[e]]]),Object(c["i"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return a.tempArticle.tag.splice(e,1)}},[J],8,["onClick"])])])})),128)),a.tempArticle.tag[a.tempArticle.tag.length-1]||!a.tempArticle.tag.length?(Object(c["x"])(),Object(c["e"])("div",_,[Object(c["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[5]||(e[5]=function(t){return a.tempArticle.tag.push("")})}," 新增標籤 ")])):Object(c["f"])("",!0)]),Object(c["i"])("div",E,[G,Object(c["T"])(Object(c["i"])("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":e[6]||(e[6]=function(t){return a.tempArticle.description=t}),placeholder:"請輸入文章描述"},null,512),[[c["O"],a.tempArticle.description]])]),Object(c["i"])("div",I,[L,Object(c["T"])(Object(c["i"])("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":e[7]||(e[7]=function(t){return a.tempArticle.content=t}),placeholder:"請輸入文章說明"},null,512),[[c["O"],a.tempArticle.content]])]),Object(c["i"])("div",z,[Object(c["i"])("div",q,[Object(c["T"])(Object(c["i"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=function(t){return a.tempArticle.isPublic=t}),id:"isPublic"},null,512),[[c["M"],a.tempArticle.isPublic]]),F])])])])]),Object(c["i"])("div",H,[K,Object(c["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=function(){return n.onUpdate&&n.onUpdate.apply(n,arguments)})},"更新文章")])])])],512)}i("ac1f"),i("1276");var R=i("7b17"),W={props:{article:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},emits:["newOrUpdateArticle"],data:function(){return{bsModal:"",tempArticle:{tag:[""]},createDate:0}},methods:{openModal:function(){this.bsModal.show()},hideModal:function(){this.bsModal.hide()},onUpdate:function(){this.$emit("newOrUpdateArticle",this.tempArticle),this.hideModal()}},watch:{article:function(){this.tempArticle=Object(u["a"])(Object(u["a"])({},this.article),{},{tag:this.article.tag||[],isPublic:this.article.isPublic||!1});var t=this.tempArticle.create_at||Math.floor(Date.now()/1e3),e=new Date(1e3*t).toISOString().split("T");this.createDate=e.shift()},createDate:function(){this.tempArticle.create_at=this.$filters.dateToTimestamp(this.createDate)}},mounted:function(){this.bsModal=new R["a"](this.$refs.modal)}};W.render=Q;var X=W,Y=i("1843"),Z=i("1799"),tt={components:{ArticleModal:X,DeleteModal:Y["a"],Pagination:Z["a"]},data:function(){return{articles:[],isNew:!1,tempArticle:{},currentPage:1,pages:{}}},methods:{getArticles:function(){var t=this;this.$swal({title:"讀取中...",icon:"info",toast:!0,position:"top",showConfirmButton:!1,timer:1e3}),p["c"].get(p["a"].article.page(this.currentPage)).then((function(e){var i=e.data.success,c=void 0!==i&&i;if(c){var l=e.data,a=l.articles,n=l.pagination;t.articles=a,t.pages=Object(u["a"])({},n)}}))},getArticle:function(t){var e=this;this.$swal({title:"讀取中...",icon:"info",toast:!0,position:"top",showConfirmButton:!1,timer:1e3}),p["c"].get(p["a"].article.src(t)).then((function(t){var i=t.data.success,c=void 0!==i&&i;if(c){var l=t.data.article;e.openModal({isNew:!1,item:l})}}))},newOrUpdateArticle:function(t){var e={data:Object(u["a"])({},t)};this.isNew?this.newArticle(e):this.updateArticle(e)},updateArticle:function(t){var e=this,i=t.data.id;p["c"].put(p["a"].article.src(i),t).then((function(t){var i=t.data.success,c=void 0!==i&&i;c&&(e.getArticles(e.currentPage),e.$swal({title:"更新文章",icon:"success",showConfirmButton:!1,timer:1e3}))}))},newArticle:function(t){var e=this;p["c"].post(p["a"].article.new,t).then((function(t){var i=t.data.success,c=void 0!==i&&i;c&&(e.getArticles(),e.$swal({title:"已新增文章",icon:"success",showConfirmButton:!1,timer:1e3}))}))},deleteArticle:function(){var t=this;p["c"].delete(p["a"].article.src(this.tempArticle.id)).then((function(e){var i=e.data.success,c=void 0!==i&&i;c&&(t.getArticles(t.currentPage),t.$swal({title:"已刪除文章",icon:"success",showConfirmButton:!1,timer:1e3}))}))},toPage:function(t){this.currentPage=t,this.getArticles()},openModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isNew,i=void 0===e||e,c=t.item,l=void 0===c?{}:c;this.isNew=i,this.tempArticle=i?{}:Object(u["a"])({},l),this.$refs.articleModal.openModal()},openDeleteModal:function(t){this.tempArticle=Object(u["a"])({},t),this.$refs.deleteModal.openModal()}},created:function(){this.getArticles()}};tt.render=d;e["default"]=tt}}]);
//# sourceMappingURL=chunk-16a8ecc4.d33668a9.js.map
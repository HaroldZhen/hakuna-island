(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6472f3a"],{"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,c={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==c.call(t)?o(t):i(r(t))}},1799:function(t,e,n){"use strict";var r=n("7a23"),i={"aria-label":"pagination"},c={class:"pagination justify-content-center"};function a(t,e,n,a,o,l){return Object(r["x"])(),Object(r["e"])("nav",i,[Object(r["i"])("ul",c,[Object(r["i"])("li",{class:["page-item",[n.pages.has_pre?"":"disabled"]],disabled:n.pages.has_pre},[Object(r["i"])("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=Object(r["U"])((function(t){return l.toPage(n.pages.current_page-1)}),["prevent"]))},"Previous")],10,["disabled"]),(Object(r["x"])(!0),Object(r["e"])(r["a"],null,Object(r["E"])(n.pages.total_pages,(function(t){return Object(r["x"])(),Object(r["e"])("li",{class:["page-item",[n.pages.current_page===t?"active":""]],key:t},[Object(r["i"])("a",{class:"page-link",href:"#",onClick:Object(r["U"])((function(e){return l.toPage(t)}),["prevent"])},Object(r["J"])(t),9,["onClick"])],2)})),128)),Object(r["i"])("li",{class:["page-item",[n.pages.has_next?"":"disabled"]],disabled:n.pages.has_next},[Object(r["i"])("a",{class:"page-link",href:"#",onClick:e[2]||(e[2]=Object(r["U"])((function(t){return l.toPage(n.pages.current_page+1)}),["prevent"]))},"Next")],10,["disabled"])])])}var o={name:"Pagination",props:["pages","currentPage"],methods:{toPage:function(t){this.pages.current_page!==t&&this.$emit("toPage",t)}}};o.render=a;e["a"]=o},1843:function(t,e,n){"use strict";var r=n("7a23"),i={class:"modal fade",id:"deletModal",tabindex:"-1",role:"dialog","aria-labelledby":"deletModalLabel","aria-hidden":"true",ref:"modal"},c={class:"modal-dialog",role:"document"},a={class:"modal-content"},o={class:"modal-header bg-danger text-white"},l={class:"modal-title"},s=Object(r["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),d={class:"modal-body"},b=Object(r["h"])(" 是否刪除 "),u={class:"text-danger"},O=Object(r["h"])(" (刪除後將無法恢復)。 "),f={class:"modal-footer"},j=Object(r["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function p(t,e,n,p,h,m){return Object(r["x"])(),Object(r["e"])("div",i,[Object(r["i"])("div",c,[Object(r["i"])("div",a,[Object(r["i"])("div",o,[Object(r["i"])("h5",l,[Object(r["i"])("span",null,"刪除 "+Object(r["J"])(n.item.title||n.item.id),1)]),s]),Object(r["i"])("div",d,[b,Object(r["i"])("strong",u,Object(r["J"])(n.item.title),1),O]),Object(r["i"])("div",f,[j,Object(r["i"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(t){return m.onSend(n.item.id)})},"確認刪除")])])])],512)}var h=n("7b17"),m={props:["item"],emits:["deleteItem"],data:function(){return{modal:""}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},onSend:function(t){this.$emit("deleteItem",t),this.hideModal()}},mounted:function(){this.modal=new h["a"](this.$refs.modal)}};m.render=p;e["a"]=m},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,c=n("1dde"),a=c("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),c=n("e538"),a=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:c.f(t)})}},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),c=n("d066"),a=n("c430"),o=n("83ab"),l=n("4930"),s=n("fdbf"),d=n("d039"),b=n("5135"),u=n("e8b5"),O=n("861d"),f=n("825a"),j=n("7b0b"),p=n("fc6a"),h=n("c04e"),m=n("5c6c"),g=n("7c73"),y=n("df75"),v=n("241c"),w=n("057f"),P=n("7418"),x=n("06cf"),k=n("9bf2"),M=n("d1e7"),_=n("9112"),J=n("6eeb"),S=n("5692"),C=n("f772"),D=n("d012"),$=n("90e3"),E=n("b622"),U=n("e538"),N=n("746f"),T=n("d44e"),I=n("69f3"),B=n("b727").forEach,F=C("hidden"),G="Symbol",L="prototype",V=E("toPrimitive"),q=I.set,A=I.getterFor(G),Q=Object[L],W=i.Symbol,z=c("JSON","stringify"),H=x.f,K=k.f,R=w.f,X=M.f,Y=S("symbols"),Z=S("op-symbols"),tt=S("string-to-symbol-registry"),et=S("symbol-to-string-registry"),nt=S("wks"),rt=i.QObject,it=!rt||!rt[L]||!rt[L].findChild,ct=o&&d((function(){return 7!=g(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=H(Q,e);r&&delete Q[e],K(t,e,n),r&&t!==Q&&K(Q,e,r)}:K,at=function(t,e){var n=Y[t]=g(W[L]);return q(n,{type:G,tag:t,description:e}),o||(n.description=e),n},ot=s?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},lt=function(t,e,n){t===Q&&lt(Z,e,n),f(t);var r=h(e,!0);return f(n),b(Y,r)?(n.enumerable?(b(t,F)&&t[F][r]&&(t[F][r]=!1),n=g(n,{enumerable:m(0,!1)})):(b(t,F)||K(t,F,m(1,{})),t[F][r]=!0),ct(t,r,n)):K(t,r,n)},st=function(t,e){f(t);var n=p(e),r=y(n).concat(ft(n));return B(r,(function(e){o&&!bt.call(n,e)||lt(t,e,n[e])})),t},dt=function(t,e){return void 0===e?g(t):st(g(t),e)},bt=function(t){var e=h(t,!0),n=X.call(this,e);return!(this===Q&&b(Y,e)&&!b(Z,e))&&(!(n||!b(this,e)||!b(Y,e)||b(this,F)&&this[F][e])||n)},ut=function(t,e){var n=p(t),r=h(e,!0);if(n!==Q||!b(Y,r)||b(Z,r)){var i=H(n,r);return!i||!b(Y,r)||b(n,F)&&n[F][r]||(i.enumerable=!0),i}},Ot=function(t){var e=R(p(t)),n=[];return B(e,(function(t){b(Y,t)||b(D,t)||n.push(t)})),n},ft=function(t){var e=t===Q,n=R(e?Z:p(t)),r=[];return B(n,(function(t){!b(Y,t)||e&&!b(Q,t)||r.push(Y[t])})),r};if(l||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=$(t),n=function(t){this===Q&&n.call(Z,t),b(this,F)&&b(this[F],e)&&(this[F][e]=!1),ct(this,e,m(1,t))};return o&&it&&ct(Q,e,{configurable:!0,set:n}),at(e,t)},J(W[L],"toString",(function(){return A(this).tag})),J(W,"withoutSetter",(function(t){return at($(t),t)})),M.f=bt,k.f=lt,x.f=ut,v.f=w.f=Ot,P.f=ft,U.f=function(t){return at(E(t),t)},o&&(K(W[L],"description",{configurable:!0,get:function(){return A(this).description}}),a||J(Q,"propertyIsEnumerable",bt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:W}),B(y(nt),(function(t){N(t)})),r({target:G,stat:!0,forced:!l},{for:function(t){var e=String(t);if(b(tt,e))return tt[e];var n=W(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(b(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!o},{create:dt,defineProperty:lt,defineProperties:st,getOwnPropertyDescriptor:ut}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:Ot,getOwnPropertySymbols:ft}),r({target:"Object",stat:!0,forced:d((function(){P.f(1)}))},{getOwnPropertySymbols:function(t){return P.f(j(t))}}),z){var jt=!l||d((function(){var t=W();return"[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))}));r({target:"JSON",stat:!0,forced:jt},{stringify:function(t,e,n){var r,i=[t],c=1;while(arguments.length>c)i.push(arguments[c++]);if(r=e,(O(e)||void 0!==t)&&!ot(t))return u(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),i[1]=e,z.apply(null,i)}})}W[L][V]||_(W[L],V,W[L].valueOf),T(W,G),D[F]=!0},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,c=Function.prototype,a=c.toString,o=/^\s*function ([^ (]*)/,l="name";r&&!(l in c)&&i(c,l,{configurable:!0,get:function(){try{return a.call(this).match(o)[1]}catch(t){return""}}})},da25:function(t,e,n){"use strict";n.r(e);var r=n("7a23"),i=Object(r["i"])("div",{class:"d-flex justify-content-between align-items-baseline"},[Object(r["i"])("h2",null,[Object(r["i"])("i",{class:"bi bi-award p-1"}),Object(r["h"])("訂單管理")])],-1),c={class:"table mt-4"},a=Object(r["i"])("thead",null,[Object(r["i"])("tr",null,[Object(r["i"])("th",null,"購買時間"),Object(r["i"])("th",null,"Email"),Object(r["i"])("th",null,"購買款項"),Object(r["i"])("th",null,"應付金額"),Object(r["i"])("th",null,"是否付款"),Object(r["i"])("th",null,"編輯")])],-1),o={class:"list-unstyled"},l={class:"text-right"},s={class:"form-check form-switch"},d={key:0},b={key:1},u={class:"btn-group"};function O(t,e,n,O,f,j){var p=Object(r["G"])("Pagination"),h=Object(r["G"])("OrderModal"),m=Object(r["G"])("DeleteModal");return Object(r["x"])(),Object(r["e"])(r["a"],null,[i,Object(r["i"])("table",c,[a,Object(r["i"])("tbody",null,[(Object(r["x"])(!0),Object(r["e"])(r["a"],null,Object(r["E"])(f.orders,(function(e){return Object(r["x"])(),Object(r["e"])("tr",{key:e.id,class:"text-secondary"},[Object(r["i"])("td",null,Object(r["J"])(t.$filters.date(e.create_at)),1),Object(r["i"])("td",null,[Object(r["i"])("span",null,Object(r["J"])(e.user.email),1)]),Object(r["i"])("td",null,[Object(r["i"])("ul",o,[(Object(r["x"])(!0),Object(r["e"])(r["a"],null,Object(r["E"])(e.products,(function(t,e){return Object(r["x"])(),Object(r["e"])("li",{key:e},Object(r["J"])(t.product.title)+" 數量："+Object(r["J"])(t.qty)+" "+Object(r["J"])(t.product.unit),1)})),128))])]),Object(r["i"])("td",l,Object(r["J"])(e.total),1),Object(r["i"])("td",null,[Object(r["i"])("div",s,[Object(r["T"])(Object(r["i"])("input",{class:"form-check-input",type:"checkbox",id:"paid".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return j.updatePayment(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[r["M"],e.is_paid]]),Object(r["i"])("label",{class:"form-check-label",for:"paid".concat(e.id)},[e.is_paid?(Object(r["x"])(),Object(r["e"])("span",d,"已付款")):(Object(r["x"])(),Object(r["e"])("span",b,"未付款"))],8,["for"])])]),Object(r["i"])("td",null,[Object(r["i"])("div",u,[Object(r["i"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return j.openModal(e)},type:"button"},"檢視",8,["onClick"]),Object(r["i"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return j.openDeleteModal(e)},type:"button"}," 刪除 ",8,["onClick"])])])])})),128))])]),f.pages.total_pages?(Object(r["x"])(),Object(r["e"])(p,{key:0,pages:f.pages,"current-page":f.currentPage,onToPage:j.toPage},null,8,["pages","current-page","onToPage"])):Object(r["f"])("",!0),Object(r["i"])(h,{order:f.tempOrder,ref:"orderModal",onUpdatePayment:j.updatePayment},null,8,["order","onUpdatePayment"]),Object(r["i"])(m,{item:f.tempOrder,onDeletItem:j.deleteOrder,ref:"deleteModal"},null,8,["item","onDeletItem"])],64)}var f=n("5530"),j=n("9de5"),p=(n("b0c0"),{class:"modal fade",id:"orderModal",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true",ref:"modal"}),h={class:"modal-dialog modal-lg"},m={class:"modal-content"},g=Object(r["i"])("div",{class:"modal-header"},[Object(r["i"])("h5",{class:"modal-title",id:"orderModalLabel"},"訂單資料"),Object(r["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={class:"modal-body"},v={class:"row"},w={class:"col-md-4"},P=Object(r["i"])("h3",{class:"bg-secondary text-white p-2 rounded-1"},"用戶資料",-1),x={class:"table"},k={key:0},M=Object(r["i"])("th",{style:{width:"100px"}},"姓名",-1),_=Object(r["i"])("th",null,"Email",-1),J=Object(r["i"])("th",null,"電話",-1),S=Object(r["i"])("th",null,"地址",-1),C={class:"col-md-8"},D=Object(r["i"])("h3",{class:"bg-secondary text-white p-2 rounded-1"},"訂單內容",-1),$={class:"table"},E=Object(r["i"])("th",{style:{width:"100px"}},"訂單編號",-1),U=Object(r["i"])("th",null,"下單時間",-1),N=Object(r["i"])("th",null,"付款狀態",-1),T={key:0,class:"text-success"},I=Object(r["h"])("已付款 "),B={key:0},F={key:1,class:"text-danger"},G=Object(r["i"])("th",null,"總金額",-1),L=Object(r["i"])("h3",{class:"bg-secondary text-white p-2 rounded-1"},"選購商品",-1),V={class:"table"},q=Object(r["i"])("thead",null,[Object(r["i"])("tr")],-1),A={class:"text-end"},Q={class:"d-flex justify-content-end"},W={class:"form-check"},z={class:"form-check-label",for:"flexCheckDefault"},H={key:0},K={key:1},R={class:"modal-footer"},X=Object(r["i"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function Y(t,e,n,i,c,a){return Object(r["x"])(),Object(r["e"])("div",p,[Object(r["i"])("div",h,[Object(r["i"])("div",m,[g,Object(r["i"])("div",y,[Object(r["i"])("div",v,[Object(r["i"])("div",w,[P,Object(r["i"])("table",x,[c.tempOrder.user?(Object(r["x"])(),Object(r["e"])("tbody",k,[Object(r["i"])("tr",null,[M,Object(r["i"])("td",null,Object(r["J"])(c.tempOrder.user.name),1)]),Object(r["i"])("tr",null,[_,Object(r["i"])("td",null,Object(r["J"])(c.tempOrder.user.email),1)]),Object(r["i"])("tr",null,[J,Object(r["i"])("td",null,Object(r["J"])(c.tempOrder.user.tel),1)]),Object(r["i"])("tr",null,[S,Object(r["i"])("td",null,Object(r["J"])(c.tempOrder.user.address),1)])])):Object(r["f"])("",!0)])]),Object(r["i"])("div",C,[D,Object(r["i"])("table",$,[Object(r["i"])("tbody",null,[Object(r["i"])("tr",null,[E,Object(r["i"])("td",null,Object(r["J"])(c.tempOrder.id),1)]),Object(r["i"])("tr",null,[U,Object(r["i"])("td",null,Object(r["J"])(t.$filters.date(c.tempOrder.create_at)),1)]),Object(r["i"])("tr",null,[N,Object(r["i"])("td",null,[c.tempOrder.paid_date?(Object(r["x"])(),Object(r["e"])("strong",T,[I,c.tempOrder.paid_date?(Object(r["x"])(),Object(r["e"])("span",B,Object(r["J"])(t.$filters.date(c.tempOrder.paid_date)),1)):Object(r["f"])("",!0)])):(Object(r["x"])(),Object(r["e"])("span",F,"尚未付款"))])]),Object(r["i"])("tr",null,[G,Object(r["i"])("td",null,Object(r["J"])(t.$filters.currency(c.tempOrder.total)),1)])])]),L,Object(r["i"])("table",V,[q,Object(r["i"])("tbody",null,[(Object(r["x"])(!0),Object(r["e"])(r["a"],null,Object(r["E"])(c.tempOrder.products,(function(e){return Object(r["x"])(),Object(r["e"])("tr",{key:e.id},[Object(r["i"])("th",null,Object(r["J"])(e.product.title),1),Object(r["i"])("td",null,Object(r["J"])(e.qty)+" / "+Object(r["J"])(e.product.unit),1),Object(r["i"])("td",A,Object(r["J"])(t.$filters.currency(e.final_total)),1)])})),128))])]),Object(r["i"])("div",Q,[Object(r["i"])("div",W,[Object(r["T"])(Object(r["i"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[1]||(e[1]=function(t){return c.tempOrder.is_paid=t})},null,512),[[r["M"],c.tempOrder.is_paid]]),Object(r["i"])("label",z,[c.tempOrder.is_paid?(Object(r["x"])(),Object(r["e"])("span",H,"已付款")):(Object(r["x"])(),Object(r["e"])("span",K,"未付款"))])])])])])]),Object(r["i"])("div",R,[X,Object(r["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(){return a.onUpdate&&a.onUpdate.apply(a,arguments)})},"修改付款狀態")])])])],512)}var Z=n("7b17"),tt={props:{order:{type:Object,default:function(){return{}}}},emits:["update-payment"],data:function(){return{bsModal:"",tempOrder:{},isPaid:!1}},methods:{openModal:function(){this.bsModal.show()},hideModal:function(){this.bsModal.hide()},onUpdate:function(){this.$emit("update-payment",this.tempOrder),this.hideModal()}},watch:{order:function(){this.tempOrder=this.order}},mounted:function(){this.bsModal=new Z["a"](this.$refs.modal)}};tt.render=Y;var et=tt,nt=n("1843"),rt=n("1799"),it={name:"admin.order",components:{OrderModal:et,DeleteModal:nt["a"],Pagination:rt["a"]},data:function(){return{tempOrder:{},orders:[],currentPage:1,pages:{}}},methods:{getOrder:function(){var t=this,e=this.pages.total_pages,n=void 0===e?5:e;this.currentPage=this.currentPage>n?n:this.currentPage,this.$swal({title:"讀取訂單",icon:"info",toast:!0,position:"top",showConfirmButton:!1,timer:1e3}),j["c"].get(j["a"].order.page(this.currentPage)).then((function(e){var n=e.data.success,r=void 0!==n&&n;if(r){var i=e.data,c=i.orders,a=i.pagination;t.orders=c,t.pages=Object(f["a"])({},a)}}))},updatePayment:function(t){var e=this,n={data:{is_paid:t.is_paid,paid_date:Math.floor(Date.now()/1e3)}};j["c"].put(j["a"].order.src(t.id),n).then((function(t){var n=t.data.success,r=void 0!==n&&n;r&&(e.getOrder(e.currentPage),e.$swal({title:"更新付款狀態",icon:"success",showConfirmButton:!1,timer:1e3}))}))},toPage:function(t){this.currentPage=t,this.getOrder()},openModal:function(t){this.tempOrder=Object(f["a"])({},t),this.$refs.orderModal.openModal()},openDeleteModal:function(t){this.tempOrder=Object(f["a"])({},t),this.$refs.deleteModal.openModal()},deleteOrder:function(){var t=this;j["c"].delete(j["a"].order.src(this.tempOrder.id)).then((function(e){var n=e.data.success,r=void 0!==n&&n;r&&(t.getOrder(t.currentPage),t.$swal({title:"已刪除訂單",icon:"success",showConfirmButton:!1,timer:1e3}))}))}},created:function(){this.getOrder()}};it.render=O;e["default"]=it},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),c=n("56ef"),a=n("fc6a"),o=n("06cf"),l=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),i=o.f,s=c(r),d={},b=0;while(s.length>b)n=i(r,e=s[b++]),void 0!==n&&l(d,e,n);return d}})},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),c=n("fc6a"),a=n("06cf").f,o=n("83ab"),l=i((function(){a(1)})),s=!o||l;r({target:"Object",stat:!0,forced:s,sham:!o},{getOwnPropertyDescriptor:function(t,e){return a(c(t),e)}})},e538:function(t,e,n){var r=n("b622");e.f=r}}]);
//# sourceMappingURL=chunk-a6472f3a.2aa36b1d.js.map
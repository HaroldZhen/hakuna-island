(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07a74bf0"],{"07ac":function(t,e,c){var i=c("23e7"),o=c("6f53").values;i({target:"Object",stat:!0},{values:function(t){return o(t)}})},"4ea3":function(t,e,c){},"6e0a":function(t,e,c){"use strict";c.r(e);c("ac1f"),c("1276");var i=c("7a23"),o={class:"d-flex justify-content-between align-items-baseline"},a=Object(i["i"])("h2",null,[Object(i["i"])("i",{class:"bi bi-house-door-fill"}),Object(i["h"])("產品管理")],-1),r={class:"table mt-4"},n=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",{width:"120"},"分類"),Object(i["i"])("th",null,"產品名稱"),Object(i["i"])("th",{width:"120"},"原價"),Object(i["i"])("th",{width:"120"},"售價"),Object(i["i"])("th",{width:"100"},"是否啟用"),Object(i["i"])("th",{width:"120"},"編輯")])],-1),l={class:"text-end"},d={class:"text-end"},u={key:0,class:"text-success"},s=Object(i["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-check2-circle",viewBox:"0 0 16 16"},[Object(i["i"])("path",{d:"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"}),Object(i["i"])("path",{d:"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"})],-1),b=Object(i["h"])(" 啟用"),p={key:1},m=Object(i["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle",viewBox:"0 0 16 16"},[Object(i["i"])("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(i["i"])("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),f=Object(i["h"])(" 未啟用"),O={class:"btn-group"};function j(t,e,c,j,h,g){var v=Object(i["G"])("Pagination"),w=Object(i["G"])("ProductModal"),P=Object(i["G"])("DeleteModal");return Object(i["x"])(),Object(i["e"])(i["a"],null,[Object(i["i"])("div",o,[a,Object(i["i"])("button",{class:"btn btn-primary m-3",onClick:e[1]||(e[1]=function(){return g.newProductModal&&g.newProductModal.apply(g,arguments)})},"建立新的產品")]),Object(i["i"])("table",r,[n,Object(i["i"])("tbody",null,[(Object(i["x"])(!0),Object(i["e"])(i["a"],null,Object(i["E"])(h.products,(function(t){return Object(i["x"])(),Object(i["e"])("tr",{key:t.id},[Object(i["i"])("td",null,[(Object(i["x"])(!0),Object(i["e"])(i["a"],null,Object(i["E"])(t.category.split(","),(function(t,e){return Object(i["x"])(),Object(i["e"])("span",{class:["badge mx-1",g.tagColor(e)],key:t.id},Object(i["J"])(t),3)})),128))]),Object(i["i"])("td",null,Object(i["J"])(t.title),1),Object(i["i"])("td",l,Object(i["J"])(t.origin_price),1),Object(i["i"])("td",d,Object(i["J"])(t.price),1),Object(i["i"])("td",null,[t.is_enabled?(Object(i["x"])(),Object(i["e"])("span",u,[s,b])):(Object(i["x"])(),Object(i["e"])("span",p,[m,f]))]),Object(i["i"])("td",null,[Object(i["i"])("div",O,[Object(i["i"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return g.editProductModal(t)}}," 編輯 ",8,["onClick"]),Object(i["i"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return g.deleteProductModal(t)}}," 刪除 ",8,["onClick"])])])])})),128))])]),h.pages.total_pages?(Object(i["x"])(),Object(i["e"])(v,{key:0,pages:h.pages,"current-page":h.currentPage,onToPage:g.toPage},null,8,["pages","current-page","onToPage"])):Object(i["f"])("",!0),h.products?(Object(i["x"])(),Object(i["e"])(w,{key:1,tempProduct:h.tempProduct,onAddImage:g.addImage,onNewOrUpdateProduct:g.newOrUpdateProduct,onDeleteImage:g.deleteImage,ref:"productModal"},null,8,["tempProduct","onAddImage","onNewOrUpdateProduct","onDeleteImage"])):Object(i["f"])("",!0),Object(i["i"])(P,{item:h.tempProduct,onDeleteItem:g.deleteProduct,ref:"deleteModal"},null,8,["item","onDeleteItem"])],64)}var h=c("5530"),g=(c("d81d"),c("07ac"),c("a434"),c("9de5")),v=c("1799"),w=c("1843"),P=(c("99af"),c("a4d3"),c("e01a"),Object(i["V"])("data-v-72d5f906"));Object(i["A"])("data-v-72d5f906");var y={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},x={class:"modal-dialog modal-xl"},M={class:"modal-content"},U={class:"modal-header bg-dark text-white"},k={id:"productModalLabel",class:"modal-title"},I={key:0},C={key:1},$=Object(i["i"])("button",{type:"button",class:"btn-close btn btn-light","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_={class:"modal-body"},T={class:"row"},L={class:"col-sm-4"},V={class:"mb-1"},A={class:"form-group"},F=Object(i["i"])("label",{class:"h5",for:"imageUrl"},"輸入圖片網址",-1),B={for:"customFile",class:"form-label"},S=Object(i["h"])("或 上傳圖片 "),z={key:0,class:"fas fa-spinner fa-spin"},D=Object(i["i"])("label",{for:"tempImages",class:"h5"},"輸入子圖片網址",-1),J={class:"input-group"},E={class:"row mt-2"},q=Object(i["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16"},[Object(i["i"])("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})],-1),G={class:"col-sm-8"},N={class:"form-group"},H=Object(i["i"])("label",{for:"title"},"標題",-1),K={class:"row"},Q={class:"form-group col-md-6"},R=Object(i["i"])("label",{for:"category"},"分類",-1),W={class:"form-group col-md-6"},X=Object(i["i"])("label",{for:"price"},"單位",-1),Y={class:"row"},Z={class:"form-group col-md-6"},tt=Object(i["i"])("label",{for:"origin_price"},"原價",-1),et={class:"form-group col-md-6"},ct=Object(i["i"])("label",{for:"price"},"售價",-1),it=Object(i["i"])("hr",null,null,-1),ot={class:"form-group"},at=Object(i["i"])("label",{for:"description"},"產品描述",-1),rt={class:"form-group"},nt=Object(i["i"])("label",{for:"content"},"說明內容",-1),lt={class:"form-group"},dt={class:"form-check"},ut=Object(i["i"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),st=Object(i["i"])("div",{class:"modal-footer"},[Object(i["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消"),Object(i["i"])("button",{class:"btn btn-primary"},"確認")],-1);Object(i["y"])();var bt=P((function(t,e,c,o,a,r){return Object(i["x"])(),Object(i["e"])("div",y,[Object(i["i"])("form",{onSubmit:e[13]||(e[13]=Object(i["U"])((function(){return r.submitFrom&&r.submitFrom.apply(r,arguments)}),["prevent"]))},[Object(i["i"])("div",x,[Object(i["i"])("div",M,[Object(i["i"])("div",U,[Object(i["i"])("h5",k,[a.product.id?(Object(i["x"])(),Object(i["e"])("span",I,"編輯產品:"+Object(i["J"])(a.product.title),1)):(Object(i["x"])(),Object(i["e"])("span",C,"新增產品"))]),$]),Object(i["i"])("div",_,[Object(i["i"])("div",T,[Object(i["i"])("div",L,[Object(i["i"])("div",V,[Object(i["i"])("div",A,[F,Object(i["T"])(Object(i["i"])("input",{type:"text",class:"form-control",id:"imageUrl","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.product.imageUrl=t}),placeholder:"請輸入圖片連結"},null,512),[[i["O"],a.product.imageUrl]])]),Object(i["i"])("label",B,[S,a.status.fileUploading?(Object(i["x"])(),Object(i["e"])("i",z)):Object(i["f"])("",!0)]),Object(i["i"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return r.uploadFile&&r.uploadFile.apply(r,arguments)})},null,544),Object(i["i"])("img",{class:"img-fluid",src:a.product.imageUrl,alt:"主圖片"},null,8,["src"])]),D,Object(i["i"])("div",J,[Object(i["T"])(Object(i["i"])("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=function(t){return a.tempImage.url=t}),id:"tempImages",class:"form-control",placeholder:"請輸入子圖片連結"},null,512),[[i["O"],a.tempImage.url]]),Object(i["i"])("button",{class:"btn btn-outline-primary",type:"button",onClick:e[4]||(e[4]=function(){return r.addImage&&r.addImage.apply(r,arguments)})},"新增")]),Object(i["i"])("div",E,[(Object(i["x"])(!0),Object(i["e"])(i["a"],null,Object(i["E"])(a.product.imagesUrl,(function(t,e){return Object(i["x"])(),Object(i["e"])("div",{key:"".concat(t).concat(e),class:"col-4 mb-1 position-relative"},[Object(i["i"])("a",{class:"del-icon text-danger stretched-link",href:"#",onClick:Object(i["U"])((function(t){return r.deleteImage(e)}),["prevent"])},[q],8,["onClick"]),Object(i["i"])("img",{class:"img-thumbnail w-100",src:t,alt:""},null,8,["src"])])})),128))])]),Object(i["i"])("div",G,[Object(i["i"])("div",N,[H,Object(i["T"])(Object(i["i"])("input",{id:"title",type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=function(t){return a.product.title=t}),placeholder:"請輸入標題",required:""},null,512),[[i["O"],a.product.title,void 0,{trim:!0}]])]),Object(i["i"])("div",K,[Object(i["i"])("div",Q,[R,Object(i["T"])(Object(i["i"])("input",{id:"category",type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=function(t){return a.product.category=t}),placeholder:"請輸入分類"},null,512),[[i["O"],a.product.category,void 0,{trim:!0}]])]),Object(i["i"])("div",W,[X,Object(i["T"])(Object(i["i"])("input",{id:"unit",type:"text",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=function(t){return a.product.unit=t}),placeholder:"請輸入單位",required:""},null,512),[[i["O"],a.product.unit,void 0,{trim:!0}]])])]),Object(i["i"])("div",Y,[Object(i["i"])("div",Z,[tt,Object(i["T"])(Object(i["i"])("input",{id:"origin_price",type:"number",min:"0","onUpdate:modelValue":e[8]||(e[8]=function(t){return a.product.origin_price=t}),class:"form-control",placeholder:"請輸入原價",required:""},null,512),[[i["O"],a.product.origin_price,void 0,{number:!0}]])]),Object(i["i"])("div",et,[ct,Object(i["T"])(Object(i["i"])("input",{id:"price",type:"number",min:"0","onUpdate:modelValue":e[9]||(e[9]=function(t){return a.product.price=t}),class:"form-control",placeholder:"請輸入售價",required:""},null,512),[[i["O"],a.product.price,void 0,{number:!0}]])])]),it,Object(i["i"])("div",ot,[at,Object(i["T"])(Object(i["i"])("textarea",{id:"description",type:"text",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=function(t){return a.product.description=t}),placeholder:"請輸入產品描述",required:""},"\n                  ",512),[[i["O"],a.product.description]])]),Object(i["i"])("div",rt,[nt,Object(i["T"])(Object(i["i"])("textarea",{id:"content",type:"text",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=function(t){return a.product.content=t}),placeholder:"請輸入說明內容"},"\n                  ",512),[[i["O"],a.product.content]])]),Object(i["i"])("div",lt,[Object(i["i"])("div",dt,[Object(i["T"])(Object(i["i"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=function(t){return a.product.is_enabled=t}),"true-value":1,"false-value":0},null,512),[[i["M"],a.product.is_enabled]]),ut])])])])]),st])])],32)],512)})),pt=c("7b17"),mt={props:["tempProduct"],emits:["newOrUpdateProduct","addImage","deleteImage"],data:function(){return{product:this.tempProduct,tempImage:{isEnable:!1,url:""},status:{},modal:""}},watch:{tempProduct:function(){this.product=this.tempProduct}},mounted:function(){this.modal=new pt["a"](this.$refs.productModal)},methods:{addImage:function(){this.$emit("addImage",this.tempImage),this.tempImage={isEnable:!1,url:""}},submitFrom:function(){this.$emit("newOrUpdateProduct",this.product)},deleteImage:function(t){this.$emit("deleteImage",t)},uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",e),this.status.fileUploading=!0,g["c"].post(g["a"].upload,c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.status.fileUploading=!1;var c=e.data.success,i=void 0!==c&&c;i&&(t.product.imageUrl=e.data.imageUrl,t.$refs.fileInput.value="",t.$swal({title:"圖片上傳結果",icon:"success",showConfirmButton:!1,timer:1e3}).then((function(){t.getProduct()})))}))}}};c("7487");mt.render=bt,mt.__scopeId="data-v-72d5f906";var ft=mt,Ot={components:{Pagination:v["a"],DeleteModal:w["a"],ProductModal:ft},data:function(){return{tempProduct:{},products:[],currentPage:1,pages:{}}},created:function(){this.tempProduct=this.defaultProduct()},mounted:function(){},methods:{tagColor:function(t){var e=["bg-primary","bg-success","bg-danger","bg-warning text-dark","bg-info text-dark"];return e[t%e.length]},defaultProduct:function(){return{imagesUrl:[]}},getProduct:function(){var t=this,e=this.pages.total_pages,c=void 0===e?5:e;this.currentPage=this.currentPage>c?c:this.currentPage,this.$swal({title:"讀取產品",icon:"info",toast:!0,position:"top",showConfirmButton:!1,timer:1e3}),g["c"].get(g["a"].product.page(this.currentPage)).then((function(e){var c=e.data,i=c.success,o=void 0!==i&&i,a=c.products,r=c.pagination;o&&(t.products=Object.values(a).map((function(t){return t})),t.pages=Object(h["a"])({},r))}))},newOrUpdateProduct:function(t){this.$refs.productModal.modal.hide();var e={data:Object(h["a"])(Object(h["a"])({},t),{},{price:t.price,origin_price:t.origin_price,is_enabled:t.is_enabled?1:0})};e.data.id?this.updateProduct(e):this.addProducts(e)},addProducts:function(t){var e=this;g["c"].post(g["a"].product.path,t).then((function(c){var i=c.data.success,o=void 0!==i&&i;o&&e.$swal({title:t.data.title,icon:"success",showConfirmButton:!1,timer:1e3}).then((function(){e.getProduct()}))}))},addImage:function(t){var e=this.tempProduct.imagesUrl,c=void 0===e?[]:e;c.push(t.url),this.tempProduct.imagesUrl=c},updateProduct:function(t){var e=this;g["c"].put(g["a"].product.src(t.data.id),t).then((function(t){var c=t.data.success,i=void 0!==c&&c;i&&e.$swal({icon:"success",title:"更新成功",showConfirmButton:!1,timer:1e3}).then((function(){e.getProduct()}))}))},deleteProduct:function(t){var e=this;this.$refs.deleteModal.modal.hide(),this.products=[],g["c"].delete(g["a"].product.src(t)).then((function(t){var c=t.data.success,i=void 0!==c&&c;i&&e.$swal({title:"刪除成功",icon:"success",showConfirmButton:!1,timer:1e3}).then((function(){e.getProduct()}))}))},deleteImage:function(t){this.tempProduct.imagesUrl.splice(t,1)},toPage:function(t){this.currentPage=t,this.getProduct()},newProductModal:function(){this.tempProduct=this.defaultProduct(),this.$refs.productModal.modal.show()},editProductModal:function(t){this.tempProduct=Object(h["a"])({},t),this.$refs.productModal.modal.show()},deleteProductModal:function(t){this.tempProduct=Object(h["a"])({},t),this.$refs.deleteModal.modal.show()}}};Ot.render=j;e["default"]=Ot},"6f53":function(t,e,c){var i=c("83ab"),o=c("df75"),a=c("fc6a"),r=c("d1e7").f,n=function(t){return function(e){var c,n=a(e),l=o(n),d=l.length,u=0,s=[];while(d>u)c=l[u++],i&&!r.call(n,c)||s.push(t?[c,n[c]]:n[c]);return s}};t.exports={entries:n(!0),values:n(!1)}},7487:function(t,e,c){"use strict";c("4ea3")},a434:function(t,e,c){"use strict";var i=c("23e7"),o=c("23cb"),a=c("a691"),r=c("50c4"),n=c("7b0b"),l=c("65f0"),d=c("8418"),u=c("1dde"),s=u("splice"),b=Math.max,p=Math.min,m=9007199254740991,f="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!s},{splice:function(t,e){var c,i,u,s,O,j,h=n(this),g=r(h.length),v=o(t,g),w=arguments.length;if(0===w?c=i=0:1===w?(c=0,i=g-v):(c=w-2,i=p(b(a(e),0),g-v)),g+c-i>m)throw TypeError(f);for(u=l(h,i),s=0;s<i;s++)O=v+s,O in h&&d(u,s,h[O]);if(u.length=i,c<i){for(s=v;s<g-i;s++)O=s+i,j=s+c,O in h?h[j]=h[O]:delete h[j];for(s=g;s>g-i+c;s--)delete h[s-1]}else if(c>i)for(s=g-i;s>v;s--)O=s+i-1,j=s+c-1,O in h?h[j]=h[O]:delete h[j];for(s=0;s<c;s++)h[s+v]=arguments[s+2];return h.length=g-i+c,u}})},d81d:function(t,e,c){"use strict";var i=c("23e7"),o=c("b727").map,a=c("1dde"),r=a("map");i({target:"Array",proto:!0,forced:!r},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},e01a:function(t,e,c){"use strict";var i=c("23e7"),o=c("83ab"),a=c("da84"),r=c("5135"),n=c("861d"),l=c("9bf2").f,d=c("e893"),u=a.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var s={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new u(t):void 0===t?u():u(t);return""===t&&(s[e]=!0),e};d(b,u);var p=b.prototype=u.prototype;p.constructor=b;var m=p.toString,f="Symbol(test)"==String(u("test")),O=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,e=m.call(t);if(r(s,t))return"";var c=f?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),i({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-07a74bf0.23251ad2.js.map